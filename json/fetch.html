<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.min.js"></script>
</head>

<body>
   <div class="container-fluid row">
    <aside class="col-md-2 border-end border-2 p-3">
        <h2 class="text-center">Categories</h2>
        <input type="text" id="cat" class="form-control my-2" placeholder="Search Products">
        <button class="btn btn-outline-success" id="search">Search</button>
    </aside>
     <div class="col-md-10 ps-5 row container-fluid" id="cart">

    </div>
   </div>

    <script type="module">
        import products from './products.js';
        const area = document.getElementById('cart');
        const cat = document.getElementById('cat');
        const searchBtn = document.querySelector('#search');


        function displayProducts(prd) {
            prd.forEach(data => {
                area.innerHTML = '';
                const el = document.createElement('div');
                el.className = 'col-md-3 col-sm-4 col-lg-4 mb-3 mt-3';
                el.innerHTML = `
                                <div class="card h-100 shadow-sm">
                                    <img 
                                        src="${data.thumbnail}"
                                        style="height:200px;object-fit:contain;"
                                        alt="${data.title}"
                                    >
                                    <div class="card-body d-flex flex-column">
                                        <h2 class="card-title">${data.title}</h2>
                                        <p class="card-text fw-bold">${data.brand}</p>
                                        <p class="card-text text-muted">${data.description}</p>
                                        <p class="card-text">${data.price}</p>

                                        <button class="btn btn-outline-primary mt-auto">Add to Cart</button>
                                    </div>
                                </div>
                                    
                `;
                area.appendChild(el);
            });
        }

        displayProducts(products);
        //initial display 
        
        // Search functionality
        searchBtn.addEventListener('click', () => {
            const searchTerm = cat.value.toLowerCase();
            const filteredProducts = products.filter(product => 
                product.title.toLowerCase()=== searchTerm || 
                product.category.toLowerCase() === searchTerm ||
                product.description.toLowerCase().includes(searchTerm) ||
                product.price.toString() === searchTerm
            );
            area.innerHTML = ''; // Clear previous results
            displayProducts(filteredProducts);
        });

    </script>
</body>

</html>